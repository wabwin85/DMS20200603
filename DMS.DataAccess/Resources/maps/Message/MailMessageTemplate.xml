<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="MailMessageTemplateMap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ibatis.apache.org/mapping">
  <alias>
    <typeAlias alias="MailMessageTemplate" assembly="DMS.Model.dll" type="DMS.Model.MailMessageTemplate" />
  </alias>
  <resultMaps>
    <resultMap id="MailMessageTemplateResult" class="MailMessageTemplate">
      <result property="Id" column="MMT_ID" type="Guid" dbType="uniqueidentifier"/>
      <result property="Code" column="MMT_Code" type="string" dbType="nvarchar"/>
      <result property="Subject" column="MMT_Subject" type="string" dbType="nvarchar"/>
      <result property="Body" column="MMT_Body" type="string" dbType="nvarchar"/>
    </resultMap>
  </resultMaps>
  <statements>
    <select id="SelectMailMessageTemplate" parameterClass="string" resultClass="MailMessageTemplate">
      SELECT MMT_ID AS Id,MMT_Code AS Code,MMT_Subject AS Subject,MMT_Body AS Body
      FROM MailMessageTemplate
      <dynamic prepend="WHERE">
        <isParameterPresent>
          MMT_ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <select id="SelectByFilterMailMessageTemplate" parameterClass="MailMessageTemplate" resultClass="MailMessageTemplate">
      SELECT MMT_ID AS Id,MMT_Code AS Code,MMT_Subject AS Subject,MMT_Body AS Body
      FROM MailMessageTemplate
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="Id">MMT_ID=#Id#</isNotNull>
        <isNotNull prepend="AND" property="Code">MMT_Code=#Code#</isNotNull>
        <isNotNull prepend="AND" property="Subject">MMT_Subject=#Subject#</isNotNull>
        <isNotNull prepend="AND" property="Body">MMT_Body=#Body#</isNotNull>
      </dynamic>
    </select>
    <insert id="InsertMailMessageTemplate" parameterClass="MailMessageTemplate">
      INSERT INTO MailMessageTemplate
      (MMT_ID,MMT_Code,MMT_Subject,MMT_Body)
      VALUES(#Id#,#Code#,#Subject#,#Body#)
    </insert>
    <update id="UpdateMailMessageTemplate" parameterClass="MailMessageTemplate">
      UPDATE MailMessageTemplate
      SET MMT_ID=#Id#,MMT_Code=#Code#,MMT_Subject=#Subject#,MMT_Body=#Body#
      WHERE MMT_ID = #Id#
    </update>
    <delete id="DeleteMailMessageTemplate" parameterClass="string">
      DELETE FROM MailMessageTemplate
      WHERE MMT_ID = #value#
    </delete>
    <!--added by bozhenfei on 20110329-->
    <select id="SelectMailMessageTemplateByCode" parameterClass="string" resultClass="MailMessageTemplate">
      SELECT MMT_ID AS Id,MMT_Code AS Code,MMT_Subject AS Subject,MMT_Body AS Body
      FROM MailMessageTemplate WHERE MMT_Code = #value#
    </select>
    <!---->
  </statements>
</sqlMap>
