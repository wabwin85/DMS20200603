<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="PublicOfficeMap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ibatis.apache.org/mapping">
    <alias>
        <typeAlias alias="PublicOffice" assembly="DMS.Model.dll" type="DMS.Model.PublicOffice" />
    </alias>
    <resultMaps>
        <resultMap id="PublicOfficeResult" class="PublicOffice">
            <result property="Id" column="PO_ID" type="Guid" dbType="uniqueidentifier"/>
            <result property="CmId" column="PO_CM_ID" type="Guid" dbType="uniqueidentifier"/>
            <result property="Name" column="PO_Name" type="string" dbType="nvarchar"/>
            <result property="Relation" column="PO_Relation" type="string" dbType="nvarchar"/>
            <result property="CreateDate" column="PO_Create_Date" type="DateTime" dbType="datetime"/>
            <result property="CreateUser" column="PO_Create_User" type="Guid" dbType="uniqueidentifier"/>
            <result property="UpdateDate" column="PO_Update_Date" type="DateTime" dbType="datetime"/>
            <result property="UpdateUser" column="PO_Update_User" type="Guid" dbType="uniqueidentifier"/>
        </resultMap>
    </resultMaps>
    <statements>

        <select id="SelectPublicOffice" parameterClass="string" resultClass="PublicOffice">
            SELECT PO_ID AS Id,PO_CM_ID AS CmId,PO_Name AS Name,PO_Relation AS Relation,PO_Create_Date AS CreateDate,PO_Create_User AS CreateUser,PO_Update_Date AS UpdateDate,PO_Update_User AS UpdateUser
            FROM PublicOffice
            <dynamic prepend="WHERE">
                <isParameterPresent>
                    PO_ID = #value#
                </isParameterPresent>
            </dynamic>
        </select>
        <select id="SelectByFilterPublicOffice" parameterClass="PublicOffice" resultClass="PublicOffice">
            SELECT PO_ID AS Id,PO_CM_ID AS CmId,PO_Name AS Name,PO_Relation AS Relation,PO_Create_Date AS CreateDate,PO_Create_User AS CreateUser,PO_Update_Date AS UpdateDate,PO_Update_User AS UpdateUser
            FROM PublicOffice
            <dynamic prepend="WHERE">
                <isNotNull prepend="AND" property="Id">PO_ID=#Id#</isNotNull>
                <isNotNull prepend="AND" property="CmId">PO_CM_ID=#CmId#</isNotNull>
                <isNotNull prepend="AND" property="Name">PO_Name=#Name#</isNotNull>
                <isNotNull prepend="AND" property="Relation">PO_Relation=#Relation#</isNotNull>
                <isNotNull prepend="AND" property="UpdateDate">PO_Update_Date=#UpdateDate#</isNotNull>
                <isNotNull prepend="AND" property="UpdateUser">PO_Update_User=#UpdateUser#</isNotNull>
            </dynamic>
        </select>
        <insert id="InsertPublicOffice" parameterClass="PublicOffice">
            INSERT INTO PublicOffice
            (PO_ID,PO_CM_ID,PO_Name,PO_Relation,PO_Create_Date,PO_Create_User,PO_Update_Date,PO_Update_User)
            VALUES(#Id#,#CmId#,#Name#,#Relation#,#CreateDate:DateTime:1/1/0001 12:00:00 AM#,#CreateUser#,#UpdateDate:DateTime:1/1/0001 12:00:00 AM#,#UpdateUser#)
        </insert>
        <update id="UpdatePublicOffice" parameterClass="PublicOffice">
            UPDATE PublicOffice
            SET PO_ID=#Id#,PO_CM_ID=#CmId#,PO_Name=#Name#,PO_Relation=#Relation#,PO_Update_Date=#UpdateDate#,PO_Update_User=#UpdateUser#
            WHERE PO_ID = #Id#
        </update>
        <delete id="DeletePublicOffice" parameterClass="string">
            DELETE FROM PublicOffice
            WHERE PO_ID = #value#
        </delete>

        <select id="SelectPublicOfficeByFilter" parameterClass="System.Collections.Hashtable" resultClass="System.Data.DataSet">
            SELECT PO_ID AS Id,PO_CM_ID AS CmId,PO_Name AS Name,PO_Relation AS Relation,PO_Create_Date AS CreateDate,PO_Create_User AS CreateUser,PO_Update_Date AS UpdateDate,PO_Update_User AS UpdateUser
            FROM PublicOffice
            <dynamic prepend="WHERE">
                <isNotNull prepend="AND" property="Id">PO_ID=#Id#</isNotNull>
                <isNotNull prepend="AND" property="CmId">PO_CM_ID=#CmId#</isNotNull>
                <isNotNull prepend="AND" property="Name">PO_Name=#Name#</isNotNull>
                <isNotNull prepend="AND" property="Relation">PO_Relation=#Relation#</isNotNull>
                <isNotNull prepend="AND" property="UpdateDate">PO_Update_Date=#UpdateDate#</isNotNull>
                <isNotNull prepend="AND" property="UpdateUser">PO_Update_User=#UpdateUser#</isNotNull>
            </dynamic>
            Order By PO_Name
        </select>

        <update id="UpdatePublicOfficeByFilter" parameterClass="PublicOffice">
            UPDATE PublicOffice
            SET PO_Name=#Name#,PO_Relation=#Relation#,PO_Update_Date=#UpdateDate#,PO_Update_User=#UpdateUser#
            WHERE PO_ID = #Id#
        </update>
        
    </statements>
</sqlMap>
