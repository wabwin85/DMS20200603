<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="ClassificationContractMap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ibatis.apache.org/mapping">
  <alias>
    <typeAlias alias="ClassificationContract" assembly="DMS.Model.dll" type="DMS.Model.ClassificationContract" />
  </alias>
  <resultMaps>
    <resultMap id="ClassificationContractResult" class="ClassificationContract">
      <result property="Id" column="CC_ID" type="Guid" dbType="uniqueidentifier"/>
      <result property="Division" column="CC_Division" type="string" dbType="varchar"/>
      <result property="Code" column="CC_Code" type="string" dbType="varchar"/>
      <result property="Namecn" column="CC_NameCN" type="string" dbType="varchar"/>
      <result property="Nameen" column="CC_NameEN" type="string" dbType="varchar"/>
      <result property="Distinguishrb" column="CC_DistinguishRB" type="bool" dbType="bit"/>
      <result property="Year" column="CC_Year" type="int" dbType="int"/>
      <result property="Rv1" column="CC_RV1" type="string" dbType="varchar"/>
      <result property="Rv2" column="CC_RV2" type="string" dbType="varchar"/>
      <result property="Rv3" column="CC_RV3" type="string" dbType="varchar"/>
      <result property="Rv4" column="CC_RV4" type="string" dbType="varchar"/>
    </resultMap>
  </resultMaps>
  <statements>

    <select id="SelectClassificationContract" parameterClass="string" resultClass="ClassificationContract">
      SELECT CC_ID AS Id,CC_Division AS Division,CC_Code AS Code,CC_NameCN AS Namecn,CC_NameEN AS Nameen,CC_DistinguishRB AS Distinguishrb,CC_Year AS Year,CC_RV1 AS Rv1,CC_RV2 AS Rv2,CC_RV3 AS Rv3,CC_RV4 AS Rv4
      FROM interface.ClassificationContract
      <dynamic prepend="WHERE">
        <isParameterPresent>
          CC_ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <select id="SelectByFilterClassificationContract" parameterClass="ClassificationContract" resultClass="ClassificationContract">
      SELECT CC_ID AS Id,CC_Division AS Division,CC_Code AS Code,CC_NameCN AS Namecn,CC_NameEN AS Nameen,CC_DistinguishRB AS Distinguishrb,CC_Year AS Year,CC_RV1 AS Rv1,CC_RV2 AS Rv2,CC_RV3 AS Rv3,CC_RV4 AS Rv4
      FROM interface.ClassificationContract
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="Id">CC_ID=#Id#</isNotNull>
        <isNotNull prepend="AND" property="Division">CC_Division=#Division#</isNotNull>
        <isNotNull prepend="AND" property="Code">CC_Code=#Code#</isNotNull>
        <isNotNull prepend="AND" property="Namecn">CC_NameCN=#Namecn#</isNotNull>
        <isNotNull prepend="AND" property="Nameen">CC_NameEN=#Nameen#</isNotNull>
        <isNotNull prepend="AND" property="Distinguishrb">CC_DistinguishRB=#Distinguishrb#</isNotNull>
        <isNotNull prepend="AND" property="Year">CC_Year=#Year#</isNotNull>
        <isNotNull prepend="AND" property="Rv1">CC_RV1=#Rv1#</isNotNull>
        <isNotNull prepend="AND" property="Rv2">CC_RV2=#Rv2#</isNotNull>
        <isNotNull prepend="AND" property="Rv3">CC_RV3=#Rv3#</isNotNull>
        <isNotNull prepend="AND" property="Rv4">CC_RV4=#Rv4#</isNotNull>
      </dynamic>
    </select>
    <insert id="InsertClassificationContract" parameterClass="ClassificationContract">
      INSERT INTO interface.ClassificationContract
      (CC_ID,CC_Division,CC_Code,CC_NameCN,CC_NameEN,CC_DistinguishRB,CC_Year,CC_RV1,CC_RV2,CC_RV3,CC_RV4)
      VALUES(#Id#,#Division#,#Code#,#Namecn#,#Nameen#,#Distinguishrb#,#Year#,#Rv1#,#Rv2#,#Rv3#,#Rv4#)
    </insert>
    <update id="UpdateClassificationContract" parameterClass="ClassificationContract">
      UPDATE interface.ClassificationContract
      SET CC_ID=#Id#,CC_Division=#Division#,CC_Code=#Code#,CC_NameCN=#Namecn#,CC_NameEN=#Nameen#,CC_DistinguishRB=#Distinguishrb#,CC_Year=#Year#,CC_RV1=#Rv1#,CC_RV2=#Rv2#,CC_RV3=#Rv3#,CC_RV4=#Rv4#
      WHERE CC_ID = #Id#
    </update>
    <delete id="DeleteClassificationContract" parameterClass="string">
      DELETE FROM interface.ClassificationContract
      WHERE CC_ID = #value#
    </delete>

    <select id="SelectPartContractIdByCCCode" parameterClass="System.Collections.Hashtable" resultClass="ClassificationContract">
      SELECT CC_ID AS Id,CC_Division AS Division,CC_Code AS Code,CC_NameCN AS Namecn,CC_NameEN AS Nameen,CC_DistinguishRB AS Distinguishrb,CC_Year AS Year,CC_RV1 AS Rv1,CC_RV2 AS Rv2,CC_RV3 AS Rv3,CC_RV4 AS Rv4
      FROM interface.ClassificationContract
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="PartsContractCode">CC_Code = #PartsContractCode#</isNotNull>
        <!--<isNotNull prepend="AND" property="ProductYear">CC_Year=#ProductYear#</isNotNull>-->
      </dynamic>
    </select>

    <select id="SelectPartContractIdByProductId" parameterClass="System.Collections.Hashtable" resultClass="System.Collections.Hashtable">
      SELECT CC_ID AS Id,CC_Division AS Division,B.ProductLineID,B.ProductLineName,CC_Code AS Code,CC_NameCN AS Namecn,CC_NameEN AS Nameen,CC_DistinguishRB AS Distinguishrb,CC_Year AS Year,CC_RV1 AS Rv1,CC_RV2 AS Rv2,CC_RV3 AS Rv3,CC_RV4 AS Rv4
      FROM interface.ClassificationContract A
      INNER JOIN V_DivisionProductLineRelation B ON B.IsEmerging='0' AND B.DivisionCode=A.CC_Division
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="Id">CC_ID=#Id#</isNotNull>
        <isNotNull prepend="AND" property="Division">CC_Division=#Division#</isNotNull>
        <isNotNull prepend="AND" property="ProductLineId">B.ProductLineID=#ProductLineId#</isNotNull>
        <isNotNull prepend="AND" property="Code">CC_Code=#Code#</isNotNull>
        <isNotNull prepend="AND" property="Namecn">CC_NameCN=#Namecn#</isNotNull>
        <isNotNull prepend="AND" property="Nameen">CC_NameEN=#Nameen#</isNotNull>
        <isNotNull prepend="AND" property="Distinguishrb">CC_DistinguishRB=#Distinguishrb#</isNotNull>
        <isNotNull prepend="AND" property="Year">CC_Year=#Year#</isNotNull>
        <isNotNull prepend="AND" property="Rv1">CC_RV1=#Rv1#</isNotNull>
        <isNotNull prepend="AND" property="Rv2">CC_RV2=#Rv2#</isNotNull>
        <isNotNull prepend="AND" property="Rv3">CC_RV3=#Rv3#</isNotNull>
        <isNotNull prepend="AND" property="Rv4">CC_RV4=#Rv4#</isNotNull>
      </dynamic>
    </select>
  </statements>
</sqlMap>
