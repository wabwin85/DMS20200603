<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="InterfaceWarehouseMap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ibatis.apache.org/mapping">
  <alias>
    <typeAlias alias="InterfaceWarehouse" assembly="DMS.Model.dll" type="DMS.Model.InterfaceWarehouse" />
  </alias>
  <resultMaps>
    <resultMap id="InterfaceWarehouseResult" class="InterfaceWarehouse">
      <result property="Id" column="IWH_ID" type="Guid" dbType="uniqueidentifier"/>
      <result property="DealerCode" column="IWH_DealerCode" type="string" dbType="nvarchar"/>
      <result property="WhmCode" column="IWH_WhmCode" type="string" dbType="nvarchar"/>
      <result property="WhmName" column="IWH_WhmName" type="string" dbType="nvarchar"/>
      <result property="HospitalCode" column="IWH_HospitalCode" type="string" dbType="nvarchar"/>
      <result property="Address" column="IWH_Address" type="string" dbType="nvarchar"/>
      <result property="PostalCode" column="IWH_PostalCode" type="string" dbType="nvarchar"/>
      <result property="IsActive" column="IWH_IsActive" type="bool" dbType="bit"/>
      <result property="LineNbr" column="IWH_LineNbr" type="int" dbType="int"/>
      <result property="FileName" column="IWH_FileName" type="string" dbType="nvarchar"/>
      <result property="ImportDate" column="IWH_ImportDate" type="DateTime" dbType="datetime"/>
      <result property="Clientid" column="IWH_ClientID" type="string" dbType="nvarchar"/>
      <result property="BatchNbr" column="IWH_BatchNbr" type="string" dbType="nvarchar"/>
      <result property="Dealerid" column="IWH_DealerID" type="Guid" dbType="uniqueidentifier"/>
      <result property="Whmid" column="IWH_WhmID" type="Guid" dbType="uniqueidentifier"/>
      <result property="Hospitalid" column="IWH_HospitalID" type="Guid" dbType="uniqueidentifier"/>
      <result property="ErrorMsg" column="IWH_ErrorMsg" type="string" dbType="nvarchar"/>
      <result property="Type" column="IWH_Type" type="string" dbType="nvarchar"/>
    </resultMap>
  </resultMaps>
  <parameterMaps>
    <parameterMap id="InterfaceWarehouseParameterMap" class="System.Collections.Hashtable" >
      <parameter property="BatchNbr" column="BatchNbr" />
      <parameter property="ClientID" column="ClientID"/>
      <parameter property="IsValid" column="IsValid" direction="Output" />
      <parameter property="RtnMsg" column="RtnMsg" direction="Output" />
    </parameterMap>
  </parameterMaps>
  <statements>

    <select id="SelectInterfaceWarehouse" parameterClass="string" resultClass="InterfaceWarehouse">
      SELECT IWH_ID AS Id,IWH_DealerCode AS DealerCode,IWH_WhmCode AS WhmCode,IWH_WhmName AS WhmName,IWH_HospitalCode AS HospitalCode,IWH_Address AS Address,IWH_PostalCode AS PostalCode,IWH_IsActive AS IsActive,IWH_LineNbr AS LineNbr,IWH_FileName AS FileName,IWH_ImportDate AS ImportDate,IWH_ClientID AS Clientid,IWH_BatchNbr AS BatchNbr,IWH_DealerID AS Dealerid,IWH_WhmID AS Whmid,IWH_HospitalID AS Hospitalid,IWH_ErrorMsg AS ErrorMsg,IWH_Type AS Type
      FROM InterfaceWarehouse
      <dynamic prepend="WHERE">
        <isParameterPresent>
          IWH_ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <select id="SelectByFilterInterfaceWarehouse" parameterClass="InterfaceWarehouse" resultClass="InterfaceWarehouse">
      SELECT IWH_ID AS Id,IWH_DealerCode AS DealerCode,IWH_WhmCode AS WhmCode,IWH_WhmName AS WhmName,IWH_HospitalCode AS HospitalCode,IWH_Address AS Address,IWH_PostalCode AS PostalCode,IWH_IsActive AS IsActive,IWH_LineNbr AS LineNbr,IWH_FileName AS FileName,IWH_ImportDate AS ImportDate,IWH_ClientID AS Clientid,IWH_BatchNbr AS BatchNbr,IWH_DealerID AS Dealerid,IWH_WhmID AS Whmid,IWH_HospitalID AS Hospitalid,IWH_ErrorMsg AS ErrorMsg,IWH_Type AS Type
      FROM InterfaceWarehouse
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="Id">IWH_ID=#Id#</isNotNull>
        <isNotNull prepend="AND" property="DealerCode">IWH_DealerCode=#DealerCode#</isNotNull>
        <isNotNull prepend="AND" property="WhmCode">IWH_WhmCode=#WhmCode#</isNotNull>
        <isNotNull prepend="AND" property="WhmName">IWH_WhmName=#WhmName#</isNotNull>
        <isNotNull prepend="AND" property="HospitalCode">IWH_HospitalCode=#HospitalCode#</isNotNull>
        <isNotNull prepend="AND" property="Address">IWH_Address=#Address#</isNotNull>
        <isNotNull prepend="AND" property="PostalCode">IWH_PostalCode=#PostalCode#</isNotNull>
        <isNotNull prepend="AND" property="IsActive">IWH_IsActive=#IsActive#</isNotNull>
        <isNotNull prepend="AND" property="LineNbr">IWH_LineNbr=#LineNbr#</isNotNull>
        <isNotNull prepend="AND" property="FileName">IWH_FileName=#FileName#</isNotNull>
        <isNotNull prepend="AND" property="ImportDate">IWH_ImportDate=#ImportDate#</isNotNull>
        <isNotNull prepend="AND" property="Clientid">IWH_ClientID=#Clientid#</isNotNull>
        <isNotNull prepend="AND" property="BatchNbr">IWH_BatchNbr=#BatchNbr#</isNotNull>
        <isNotNull prepend="AND" property="Dealerid">IWH_DealerID=#Dealerid#</isNotNull>
        <isNotNull prepend="AND" property="Whmid">IWH_WhmID=#Whmid#</isNotNull>
        <isNotNull prepend="AND" property="Hospitalid">IWH_HospitalID=#Hospitalid#</isNotNull>
        <isNotNull prepend="AND" property="ErrorMsg">IWH_ErrorMsg=#ErrorMsg#</isNotNull>
        <isNotNull prepend="AND" property="Type">IWH_Type=#Type#</isNotNull>
      </dynamic>
    </select>
    <insert id="InsertInterfaceWarehouse" parameterClass="InterfaceWarehouse">
      INSERT INTO InterfaceWarehouse
      (IWH_ID,IWH_DealerCode,IWH_WhmCode,IWH_WhmName,IWH_HospitalCode,IWH_Address,IWH_PostalCode,IWH_IsActive,IWH_LineNbr,IWH_FileName,IWH_ImportDate,IWH_ClientID,IWH_BatchNbr,IWH_Type)
      VALUES(#Id#,#DealerCode#,#WhmCode#,#WhmName#,#HospitalCode#,#Address#,#PostalCode#,#IsActive#,#LineNbr#,#FileName#,#ImportDate:DateTime:1/1/0001 12:00:00 AM#,#Clientid#,#BatchNbr#,#Type#)
    </insert>
    <update id="UpdateInterfaceWarehouse" parameterClass="InterfaceWarehouse">
      UPDATE InterfaceWarehouse
      SET IWH_ID=#Id#,IWH_DealerCode=#DealerCode#,IWH_WhmCode=#WhmCode#,IWH_WhmName=#WhmName#,IWH_HospitalCode=#HospitalCode#,IWH_Address=#Address#,IWH_PostalCode=#PostalCode#,IWH_IsActive=#IsActive#,IWH_LineNbr=#LineNbr#,IWH_FileName=#FileName#,IWH_ImportDate=#ImportDate#,IWH_ClientID=#Clientid#,IWH_BatchNbr=#BatchNbr#,IWH_Type =#Type#
      WHERE IWH_ID = #Id#
    </update>
    <delete id="DeleteInterfaceWarehouse" parameterClass="string">
      DELETE FROM InterfaceWarehouse
      WHERE IWH_ID = #value#
    </delete>
    <procedure id="GC_Interface_ConsignmentWarehouse" parameterMap="InterfaceWarehouseParameterMap">
      dbo.GC_Interface_ConsignmentWarehouse
    </procedure>
    <select id="SelectWarehouseByBatchNbrErrorOnly" parameterClass="string" resultClass="InterfaceWarehouse">
      SELECT IWH_ID AS Id,IWH_DealerCode AS DealerCode,IWH_WhmCode AS WhmCode,IWH_WhmName AS WhmName,IWH_HospitalCode AS HospitalCode,IWH_Address AS Address,IWH_PostalCode AS PostalCode,IWH_IsActive AS IsActive,IWH_LineNbr AS LineNbr,IWH_FileName AS FileName,IWH_ImportDate AS ImportDate,IWH_ClientID AS Clientid,IWH_BatchNbr AS BatchNbr,IWH_DealerID AS Dealerid,IWH_WhmID AS Whmid,IWH_HospitalID AS Hospitalid,IWH_ErrorMsg AS ErrorMsg,IWH_Type AS [Type]
      FROM InterfaceWarehouse
      WHERE IWH_BatchNbr = #value# AND IWH_ErrorMsg IS NOT NULL
      ORDER BY IWH_LineNbr
    </select>
  </statements>
</sqlMap>
